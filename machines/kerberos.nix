{
  config,
  pkgs,
  inputs,
  modulesPath,
  lib,
  ...
}: {
  imports = [
    (modulesPath + "/profiles/qemu-guest.nix")
    ../modules
  ];

  # Machine identification
  networking.hostName = "kerberos";

  # Module configuration
  hyprland.enable = false;
  floorp.enable = false;
  shell.enable = true;
  docker.enable = true;
  qemu.enable = true;
  networkmanager.enable = true;
  tailscale.enable = false;
  headscale.enable = true;
  mullvad.enable = false;
  nvidia.enable = false;
  syncthing.enable = false;
  samba.enable = true;
  pentesting.enable = false;
  library.enable = false;
  ssh.server.enable = true;
  disko.enable = false; # Only enable during installation
  wallpaper = "/home/ml/pics/wall/wallhaven-jx632y.jpg";

  # Terminal configurations
  terminal = {
    enable = true;
    alacritty.enable = false;
    starship.enable = true;
  };

  # Development tools
  development = {
    enable = true;
    git.enable = true;
    vscode.enable = false;
    nodejs.enable = true;
    python.enable = true;
  };

  # Utility tools
  utilities = {
    enable = true;
    compression.enable = true;
    text.enable = true;
    system.enable = true;
    nix.enable = true;
  };

  # Desktop applications
  applications = {
    enable = false;
  };

  # Add any kerberos-specific configuration here

  # Hardware configuration
  # This is usually generated by the NixOS installer
  # You'll need to replace this with the actual hardware configuration
  # from your Hetzner server
  boot.initrd.availableKernelModules = ["ahci" "xhci_pci" "virtio_pci" "virtio_scsi" "sd_mod" "sr_mod"];
  boot.initrd.kernelModules = [];
  boot.kernelModules = [];
  boot.extraModulePackages = [];
  boot.loader.grub.enable = true;
  boot.loader.grub.device = "/dev/sda";

  # File systems
  # Update this section with your actual disk layout
  fileSystems."/" = {
    device = "/dev/disk/by-uuid/f6c20247-7d54-4395-8cde-59566053f313";
    fsType = "ext4";
  };

  swapDevices = [
    {device = "/dev/disk/by-uuid/0277dfc5-9252-4369-9885-62dd2acf86a1";}
  ];
}
